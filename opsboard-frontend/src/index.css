/**
 * @file src/index.css
 * @description 全局基础样式，包括字体、颜色变量、滚动条等。
 * @modification
 *   - [UI修复]：重写了 WebKit 滚动条样式，以解决悬停时不可见的问题，并实现现代化的自动隐藏效果。
 *   - [实现]：滑块默认透明，当鼠标悬停至滚动条轨道区域时才显现。当鼠标直接悬停于滑块或拖动时，颜色会进一步加深以提供明确的交互反馈。
 */

/* ───────────────── 0. 字体文件引入 (已移除) ───────────────── */
/*
 * 所有 @font-face 声明已被移除。
 * 字体现在通过在 `src/main.tsx` 中导入 `@fontsource` 包来管理。
 * 例如: import '@fontsource/roboto/400.css';
 * 这种方法有以下优点：
 * 1. 减少请求：构建工具可以将字体文件内联或作为优化后的资源块处理。
 * 2. 版本控制：字体版本与 npm 包版本绑定，易于管理和更新。
 * 3. 自动优化：构建工具会自动处理 `font-display: swap` 等最佳实践。
*/

/* ───────────────── 1. 设计令牌（CSS Variables） ───────────────── */
:root {
    /* 1.1 颜色变量（示例，仅列主色 / 副色 / 错误色） */
    --md-primary: #2962ff; /* 品牌主色（蓝） */
    --md-secondary: #ff6d00; /* 品牌副色（橙） */
    --md-error: #d32f2f; /* 错误色（红） */

    /* 1.2 圆角 */
    --md-radius: 12px; /* 全局统一圆角 */

    /* 1.3 字体栈：先本地字体，后回退系统字体 */
    --md-font: 'Roboto', 'Noto Sans SC', 'PingFang SC', 'Microsoft YaHei',
    'Helvetica Neue', Arial, sans-serif;
}

/* ───────────────── 2. 页面基础布局 ───────────────── */
html,
body,
#root {
    height: 100%; /* 占满视口，为子元素百分比高度提供参照 */
    margin: 0; /* 清除默认外边距 */
    overflow: hidden; /* ★锁死最外层滚动条★ */
    overscroll-behavior: contain; /* ★阻止惯性拖动将页面整体拉动★ */
    font-family: var(--md-font); /* 使用上方自定义字体栈 */
    background-color: #fafafa; /* 全局浅灰底 */
    -webkit-font-smoothing: antialiased; /* Mac / Chrome 抗锯齿 */
    -moz-osx-font-smoothing: grayscale; /* Firefox 抗锯齿 */
}

/* 媒体元素默认占满容器宽度 */
img,
video {
    max-width: 100%;
    height: auto;
    display: block;
}

/* ───────────────── 3. 表格统一视觉 ───────────────── */
/* 说明：
 *   · border-collapse: separate —— 让 position: sticky 能生效。
 *   · border-spacing: 0          —— 去单元格缝隙，接近 collapsed 效果。
 *   · overflow: visible          —— 允许 sticky 单元格超出表格容器。 */
table {
    width: 100%; /* 100% 宽保证充满父级 */
    border-collapse: separate; /* ✅Sticky 依赖 */
    border-spacing: 0; /* 无缝隙 */
    overflow: visible; /* ✅必须 visible */
    border-radius: var(--md-radius); /* 统一圆角 */
}

/* ───────────────── 4. WebKit 滚动条美化 ───────────────── */
/*
 * 修复悬停时不可见的问题，并实现现代化的“自动隐藏”悬浮滚动条。
 * 策略:
 * 1. 默认状态下，滑块(thumb)完全透明，不可见但其交互区域依然存在。
 * 2. 当鼠标悬停在整个滚动条的区域(track)上时，滑块才会显现。
 * 3. 当鼠标进一步悬停在滑块本身或进行拖动时，颜色会加深，提供清晰的交互反馈。
 */
::-webkit-scrollbar {
    width: 8px; /* 竖向滚动条宽 */
    height: 8px; /* 横向滚动条高 */
}

::-webkit-scrollbar-track {
    background: transparent; /* 轨道始终保持透明 */
}

::-webkit-scrollbar-thumb {
    background: transparent; /* 1. 默认状态下，滑块完全透明 */
    border-radius: 4px; /* 保留圆角 */
}

/* 2. 核心修复：当鼠标悬停在滚动条的“轨道”区域时，显示滑块 */
/*    这是一个非标准的 WebKit 扩展, 但在现代浏览器中能很好地实现所需效果。*/
::-webkit-scrollbar:hover::-webkit-scrollbar-thumb {
    background: rgba(0, 0, 0, 0.25);
}

/* 3. 当鼠标直接悬停在滑块上时，加深颜色以提供更好的反馈 */
::-webkit-scrollbar-thumb:hover {
    background: rgba(0, 0, 0, 0.4);
}

/* 4. 当用户点击并拖动滑块时，使用最深的颜色以示区分 */
::-webkit-scrollbar-thumb:active {
    background: rgba(0, 0, 0, 0.5);
}


/* ───────────────── 5. 文本 / 代码块样式 ───────────────── */
a {
    color: inherit; /* 链接默认跟随父级颜色 */
    text-decoration: none; /* 去掉下划线 */
}

a:hover {
    text-decoration: underline; /* 悬停时再显示下划线 */
}

code,
pre {
    font-family: 'Roboto Mono', ui-monospace, SFMono-Regular,
    'SF Mono', Menlo, Consolas, monospace; /* 等宽字体 */
}

pre {
    background: #f6f6f6; /* 代码块灰底 */
    padding: 1rem; /* 内边距 16px */
    border-radius: var(--md-radius);
    overflow-x: auto; /* 横向滚动显示长行 */
}

/* 禁用元素统一样式（按钮 / 输入框） */
[disabled] {
    opacity: 0.45; /* 半透明 */
    cursor: not-allowed !important; /* 禁止点击 */
}